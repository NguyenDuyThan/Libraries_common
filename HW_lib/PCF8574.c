/*-----------------------------------------------------------------------------------------------
 * Describe: PCF8574: 8 I/O to I2C IC. Source file.
 * Author: Duy Vinh To
 * Team: Dinh Vi So
 ------------------------------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------------------------
 * INCLUDE
 ------------------------------------------------------------------------------------------------*/
#include "PCF8574.h"
/*-----------------------------------------------------------------------------------------------
 * DEFINE
 ------------------------------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------------------------
 * VARIABLES
 ------------------------------------------------------------------------------------------------*/
static PCF8574_wrtI2C_CB PCF8574_wrtI2C;
static PCF8574_rdI2C_CB PCF8574_rdI2C;
/*-----------------------------------------------------------------------------------------------
 * FUNC.PROTOTYPES
 ------------------------------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------------------------
 * FUNCTIONS
 ------------------------------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------------------------
 * Brief: initial PCF8574 (Mount callback functions).
 ------------------------------------------------------------------------------------------------*/
void PCF8574_setup(PCF8574_wrtI2C_CB wrtI2CCB, PCF8574_rdI2C_CB rdI2CCB)
{
	PCF8574_wrtI2C = wrtI2CCB;
	PCF8574_rdI2C = rdI2CCB;
}

/*-----------------------------------------------------------------------------------------------
 * Brief: write to PCF8574 (ouput mode)
 ------------------------------------------------------------------------------------------------*/
U8 PCF8574_wrt(U8 I2Caddr, U8 val)
{
	return PCF8574_wrtI2C(I2Caddr, 1, &val);
}

/*-----------------------------------------------------------------------------------------------
 * Brief: Read from PCF8574 (input mode)
 ------------------------------------------------------------------------------------------------*/
U8 PCF8574_rd(U8 I2Caddr, U8 *val)
{
	return PCF8574_rdI2C(I2Caddr, 1, val);
}


